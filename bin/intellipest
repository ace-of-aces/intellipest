#!/usr/bin/env php
<?php

declare(strict_types=1);

use AceOfAces\IntelliPest\Commands\IntelliPestCommand;
use Symfony\Component\Console\Application;

// Used when IntelliPest is required using composer.
$vendorPath = dirname(__DIR__, 4).'/vendor/autoload.php';

// Used when developing IntelliPest.
$localPath = dirname(__DIR__).'/vendor/autoload.php';

if (file_exists($vendorPath)) {
    include_once $vendorPath;
    $autoloadPath = $vendorPath;
} else {
    include_once $localPath;
    $autoloadPath = $localPath;
}

$composerJson = json_decode(file_get_contents(__DIR__.'/../composer.json'), true);
$version = $composerJson['version'] ?? '1.0.0';

$app = new Application('IntelliPest', $version);
$app->addCommand(new IntelliPestCommand);
$app->setDefaultCommand('intellipest', true);
$app->run();
